import{j as e}from"./jsx-runtime.BMN_4_xO.js";import{m as I,a as B,b as D,h as L,p as P}from"./metaInfo.CF6kxcXV.js";import{p as y,a as R}from"./scrollInfo.Dc10y8xV.js";import{i as E}from"./viewport.Y7lvnaf8.js";import{f as O}from"./floor.SCPBb_Bg.js";import{b as V,u as l}from"./react.B_xZUFfN.js";import{r}from"./index.CMQ3OGCn.js";import{m as k,a as T,s as Y}from"./config.CwazUFqo.js";import{c as j}from"./clsx.B-dksMZM.js";import{r as K}from"./index.BmlIon32.js";import{A as f}from"./index.Bd9scz_d.js";import{m as c}from"./proxy.CmKmgalu.js";import{m as _,C as $}from"./context.SC0Rv4H5.js";import{R as F,T as X,P as Z,O as q,C as G}from"./index.BRr1tt11.js";import"./vanilla.C8HErAQ2.js";import"./toNumber.DCaU3JdG.js";function J(){const t=r.useId(),s=r.useRef(0),n=V(_);return{present(i){const o=`${t}-${s.current++}`,u={...i,id:i.id??o};return n(d=>[...d,u]),()=>{n(d=>d.filter(p=>p.id!==u.id))}}}}function Q(){return r.useContext($)}const h=60;function U(){const t=l(y);return t>=h*2?1:t<=h?0:O((t-h)/h,2)}function C(){return l(L)}function W(){return l(y)<h}function z(){return l(E)}function N(){const t=C(),s=l(y);return t&&s>=h}function ee(){const t=l(I),s=l(B),n=l(D);return{title:t,description:s,slug:n}}function te(){return l(P)}function se(){const t=l(y),s=l(R);return C()&&t>=400&&s==="up"}function ne(){const t=U();return e.jsx("div",{className:"absolute inset-0 -z-1 border-b border-primary bg-white/70 dark:bg-zinc-800/70 backdrop-saturate-150 backdrop-blur-lg transform-gpu",style:{opacity:t}})}function ae({to:t=document.body,children:s}){return K.createPortal(s,t)}function re(){return e.jsxs(e.Fragment,{children:[e.jsx(ie,{}),e.jsx(oe,{})]})}function ie(){const t=W(),s=N();return e.jsx(f,{children:!s&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(A,{isBgShow:t})})})}function oe(){const t=se();return e.jsx(ae,{children:e.jsx(f,{children:t&&e.jsx(c.div,{className:"fixed z-10 top-12 inset-x-0 flex justify-center pointer-events-none",initial:{y:-20},animate:{y:0},exit:{y:-20,opacity:0},children:e.jsx(A,{isBgShow:!0})})})})}function A({isBgShow:t}){const s=te(),[n,i]=r.useState(0),[o,u]=r.useState(0),[d,p]=r.useState(0),v=`radial-gradient(${d}px circle at ${n}px ${o}px, rgb(var(--color-accent) / 0.12) 0%, transparent 65%)`,x=({clientX:a,clientY:b,currentTarget:w})=>{const m=w.getBoundingClientRect();i(a-m.left),u(b-m.top),p(Math.sqrt(m.width**2+m.height**2)/2.5)};return e.jsxs("nav",{className:j("relative rounded-full group pointer-events-auto duration-200",{"bg-gradient-to-b from-zinc-50/70 to-white/90 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur-md dark:from-zinc-900/70 dark:to-zinc-800/90 dark:ring-zinc-100/10":t}),onMouseMove:x,children:[e.jsx("div",{className:"absolute -z-1 -inset-px rounded-full opacity-0 group-hover:opacity-100 duration-500",style:{background:v},"aria-hidden":!0}),e.jsx("div",{className:"text-sm px-4 flex",children:k.map(a=>e.jsx(le,{href:a.link,title:a.name,icon:a.icon,isActive:s===a.link},a.name))})]})}function le({href:t,isActive:s,title:n,icon:i}){return e.jsxs("a",{className:j("relative block px-4 py-1.5",s?"text-accent":"hover:text-accent"),href:t,children:[e.jsxs("div",{className:"flex space-x-2",children:[s&&e.jsx(c.i,{className:j("iconfont",i),initial:{y:10,opacity:0},animate:{y:0,opacity:1}}),e.jsx("span",{children:n})]}),s&&e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-px bg-gradient-to-r from-transparent via-accent/70 to-transparent"})]})}function ce(t,s){const[n,i]=r.useState(t);return r.useEffect(()=>{const o=setTimeout(()=>{i(t)},s);return()=>{clearTimeout(o)}},[t,s]),n}let g=null;async function de(){g||(g=await import("/pagefind/pagefind.js"))}function ue(){const{present:t}=J(),s=()=>{t({content:e.jsx(xe,{})})};return me({onOpen:s}),e.jsx("button",{className:"size-9 rounded-full shadow-lg shadow-zinc-800/5 border border-primary bg-white/50 dark:bg-zinc-800/50 backdrop-blur",type:"button","aria-label":"Search",onClick:s,children:e.jsx("i",{className:"iconfont icon-search"})})}function xe(){const[t,s]=r.useState(""),[n,i]=r.useState(!1),[o,u]=r.useState([]),d=ce(t,350),{dismiss:p}=Q();async function v(a){if(!a){u([]);return}if(i(!0),await de(),g){const b=await g.search(a),w=await Promise.all(b.results.map(m=>m.data()));u(w)}i(!1)}r.useEffect(()=>{v(d)},[d]);let x=null;return n?x=e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",viewBox:"0 0 24 24",className:"animate-spin",children:e.jsx("path",{fill:"currentColor",d:"M12 2a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1m0 15a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0v-3a1 1 0 0 1 1-1m8.66-10a1 1 0 0 1-.366 1.366l-2.598 1.5a1 1 0 1 1-1-1.732l2.598-1.5A1 1 0 0 1 20.66 7M7.67 14.5a1 1 0 0 1-.367 1.366l-2.598 1.5a1 1 0 1 1-1-1.732l2.598-1.5a1 1 0 0 1 1.366.366M20.66 17a1 1 0 0 1-1.366.366l-2.598-1.5a1 1 0 0 1 1-1.732l2.598 1.5A1 1 0 0 1 20.66 17M7.67 9.5a1 1 0 0 1-1.367.366l-2.598-1.5a1 1 0 1 1 1-1.732l2.598 1.5A1 1 0 0 1 7.67 9.5"})})}):t.length===0?x=e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"m18.031 16.617l4.283 4.282l-1.415 1.415l-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9s9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617m-2.006-.742A6.98 6.98 0 0 0 18 11c0-3.867-3.133-7-7-7s-7 3.133-7 7s3.133 7 7 7a6.98 6.98 0 0 0 4.875-1.975z"})})}):o.length===0?x=e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M11 11v2l-5.327 6H11v2H3v-2l5.326-6H3v-2zm10-8v2l-5.327 6H21v2h-8v-2l5.326-6H13V3z"})}),e.jsx("div",{children:"无内容"})]})}):x=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm px-3 mb-2",children:["找到以下 ",o.length," 条结果"]}),o.map(a=>e.jsxs("a",{href:a.url,className:"hover:bg-accent/10 rounded block px-3 py-2",onClick:p,children:[e.jsx("div",{className:"font-semibold",children:a.meta.title}),e.jsx("p",{className:"text-sm",dangerouslySetInnerHTML:{__html:a.excerpt}})]},a.url))]}),e.jsxs(c.div,{className:"bg-primary rounded-lg w-[90vw] h-[80vh] max-w-[680px] max-h-[480px] border border-primary flex flex-col",initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},children:[e.jsx("input",{className:"px-4 py-3 outline-none bg-transparent border-b border-primary",type:"text",placeholder:"Search...",maxLength:64,value:t,onChange:a=>s(a.target.value)}),e.jsx("div",{className:"px-4 py-3 overflow-y-auto grow",children:x}),e.jsx("div",{className:"px-3 py-2 flex justify-end",children:e.jsxs("a",{href:"https://pagefind.app/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center ",children:[e.jsx("span",{className:"mr-2 text-xs",children:"Search by"}),e.jsx("span",{className:"font-semibold",children:"pagefind"})]})})]})}function me({onOpen:t}){r.useEffect(()=>{function s(n){n.key.toLowerCase()==="k"&&(n.metaKey||n.ctrlKey)&&(n.preventDefault(),t())}return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[t])}function M(){const t=z(),s=N();return t?e.jsx(f,{children:!s&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(S,{})})}):e.jsx(S,{})}function S(){return e.jsx("a",{className:"block",href:"/",title:"Nav to home",children:e.jsx("img",{className:"size-[40px] select-none object-cover rounded-2xl",src:T.avatar,alt:"Site owner avatar"})})}function he(){const{title:t,description:s,slug:n}=ee(),i=N();return e.jsx(f,{children:i&&e.jsxs(c.div,{className:"absolute inset-0 z-1 flex items-center justify-between md:px-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:[e.jsxs("div",{className:"grow min-w-0",children:[e.jsx("div",{className:"text-secondary text-xs truncate",children:s}),e.jsx("h2",{className:"truncate text-lg",children:t})]}),e.jsxs("div",{className:"hidden md:block min-w-0 text-right",children:[e.jsx("div",{className:"text-secondary text-xs truncate",children:n}),e.jsx("div",{children:Y.title})]})]})})}const pe={hidden:{x:"-100%",transition:{duration:.2,ease:"easeOut"}},visible:{x:0,transition:{staggerChildren:.1,delayChildren:.1,duration:.2,ease:"easeOut"}}},fe={hidden:{opacity:0,x:"-100%"},visible:{opacity:1,x:0}};function je({zIndex:t=999}){const[s,n]=r.useState(!1),i=t-1,o=t;return e.jsxs(F,{open:s,onOpenChange:n,children:[e.jsx(X,{asChild:!0,children:e.jsx(ge,{})}),e.jsx(f,{children:s&&e.jsxs(Z,{forceMount:!0,children:[e.jsx(q,{asChild:!0,children:e.jsx(c.div,{className:"fixed inset-0 bg-gray-800/40",style:{zIndex:i},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{delay:.1}}})}),e.jsx(G,{asChild:!0,children:e.jsx(c.div,{className:"fixed left-0 inset-y-0 h-full bg-primary rounded-r-lg p-4 flex flex-col justify-center w-[260px] max-w-[80%]",style:{zIndex:o},variants:pe,initial:"hidden",animate:"visible",exit:"hidden",children:e.jsx(H.Provider,{value:{dismiss(){n(!1)}},children:e.jsx(ye,{})})})})]})})]})}const ge=r.forwardRef((t,s)=>e.jsx("button",{ref:s,className:"size-9 rounded-full shadow-lg shadow-zinc-800/5 border border-primary bg-white/50 dark:bg-zinc-800/50 backdrop-blur",type:"button","aria-label":"Open menu",...t,children:e.jsx("i",{className:"iconfont icon-menu"})}));function ye(){const{dismiss:t}=r.useContext(H);return e.jsx("ul",{className:"mt-8 pb-8 overflow-y-auto overflow-x-hidden min-h-0",children:k.map(s=>e.jsx(c.li,{variants:fe,children:e.jsxs("a",{className:"inline-flex p-2 space-x-4",href:s.link,onClick:t,children:[e.jsx("i",{className:j("iconfont",s.icon)}),e.jsx("span",{children:s.name})]})},s.name))})}const H=r.createContext(null);function Re(){const t=z();return e.jsxs("header",{className:"fixed top-0 inset-x-0 h-[64px] z-10 overflow-hidden",children:[e.jsx(ne,{}),e.jsxs("div",{className:"max-w-[1100px] h-full md:px-4 mx-auto grid grid-cols-[64px_auto_64px]",children:[e.jsx("div",{className:"flex items-center justify-center",children:t?e.jsx(je,{}):e.jsx(M,{})}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[t?e.jsx(M,{}):e.jsx(re,{}),e.jsx(he,{})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(ue,{})})]})]})}export{Re as Header};
